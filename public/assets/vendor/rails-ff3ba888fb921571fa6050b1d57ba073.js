jQuery(function(e){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e.fn.extend({triggerAndReturn:function(t,n){var i=new e.Event(t);return this.trigger(i,n),i.result!==!1},callRemote:function(){var t=this,n=t.attr("method")||t.attr("data-method")||"GET",i=t.attr("action")||t.attr("href"),r=t.attr("data-type")||"script";if(void 0===i)throw"No URL specified for remote call (action or href must be present).";if(t.triggerAndReturn("ajax:before")){var s=t.is("form")?t.serializeArray():[];e.ajax({url:i,data:s,dataType:r,type:n.toUpperCase(),beforeSend:function(e){t.trigger("ajax:loading",e)},success:function(e,n,i){t.trigger("ajax:success",[e,n,i])},complete:function(e){t.trigger("ajax:complete",e)},error:function(e,n,i){t.trigger("ajax:failure",[e,n,i])}})}t.trigger("ajax:after")}}),e("a[data-confirm],input[data-confirm]").live("click",function(){var t=e(this);return t.triggerAndReturn("confirm")&&!confirm(t.attr("data-confirm"))?!1:void 0}),e("form[data-remote]").live("submit",function(t){e(this).callRemote(),t.preventDefault()}),e("a[data-remote],input[data-remote]").live("click",function(t){e(this).callRemote(),t.preventDefault()}),e("a[data-method]:not([data-remote])").live("click",function(i){var r=e(this),s=r.attr("href"),o=r.attr("data-method"),a=e('<form method="post" action="'+s+'"></form>'),l='<input name="_method" value="'+o+'" type="hidden" />';null!=n&&null!=t&&(l+='<input name="'+n+'" value="'+t+'" type="hidden" />'),a.hide().append(l).appendTo("body"),i.preventDefault(),a.submit()});var i="input[data-disable-with]",r="form[data-remote]:has("+i+")",s="form:not([data-remote]):has("+i+")",o=function(){e(this).find(i).each(function(){var t=e(this);t.data("enable-with",t.val()).attr("value",t.attr("data-disable-with")).attr("disabled","disabled")})};e(r).live("ajax:before",o),e(s).live("submit",o),e(r).live("ajax:complete",function(){e(this).find(i).each(function(){var t=e(this);t.removeAttr("disabled").val(t.data("enable-with"))})})});